<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Educational Agent</title>

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: #f4f7fb;
}

.hero {
  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
  url("https://images.unsplash.com/photo-1529070538774-1843cb3265df?auto=format&fit=crop&w=1600&q=80");
  background-size: cover;
  background-position: center;
  color: white;
  padding: 110px 20px;
  text-align: center;
}

.hero h1 {
  font-weight: 700;
}

.section-img {
  max-width: 120px;
  margin-bottom: 10px;
}

.card {
  border-radius: 18px;
  border: none;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-6px);
}

.icon-big {
  font-size: 42px;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}

.section-title {
  font-weight: 600;
}

footer {
  background: #1f2933;
  color: #ccc;
  padding: 16px;
  text-align: center;
  margin-top: 50px;
}
</style>
</head>

<body>

<!-- HERO -->
<section class="hero">
  <h1>üéì Educational Agent</h1>
  <p class="lead">AI-powered learning & progress management system</p>
</section>

<div class="container my-5">

<!-- DASHBOARD -->
<div class="row text-center mb-5">
  <div class="col-md-4 mb-3">
    <div class="card p-4">
      <i class="bi bi-journal-bookmark-fill text-primary icon-big"></i>
      <h5 class="mt-2">Total Courses</h5>
      <h2 id="courseCount">0</h2>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card p-4">
      <i class="bi bi-people-fill text-success icon-big"></i>
      <h5 class="mt-2">Total Students</h5>
      <h2 id="studentCount">0</h2>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="card p-4">
      <i class="bi bi-robot text-info icon-big"></i>
      <h5 class="mt-2">AI Assistance</h5>
      <h2>Active</h2>
    </div>
  </div>
</div>

<!-- ADD COURSE -->
<div class="card p-4 mb-4 text-center">
  <img src="https://cdn-icons-png.flaticon.com/512/3135/3135755.png" class="section-img" alt="Course">
  <h4 class="section-title">Add Course</h4>
  <input id="courseName" class="form-control mb-2" placeholder="Course name">
  <input id="courseDuration" type="number" class="form-control mb-2" placeholder="Duration (days)">
  <button class="btn btn-primary w-100" onclick="addCourse()">
    <i class="bi bi-plus-circle"></i> Add Course
  </button>
  <ul id="coursesList" class="list-group mt-3"></ul>
</div>

<!-- ADD STUDENT -->
<div class="card p-4 mb-4 text-center">
  <img src="https://cdn-icons-png.flaticon.com/512/201/201818.png" class="section-img" alt="Student">
  <h4 class="section-title">Add Student</h4>
  <input id="studentName" class="form-control mb-2" placeholder="Student name">
  <input id="studentProgress" type="number" class="form-control mb-2" placeholder="Progress %">
  <button class="btn btn-success w-100" onclick="addStudent()">
    <i class="bi bi-person-plus"></i> Add Student
  </button>
  <ul id="studentsList" class="list-group mt-3"></ul>
</div>

<!-- RECOMMENDATION -->
<div class="card p-4 mb-4 text-center">
  <img src="https://cdn-icons-png.flaticon.com/512/942/942748.png" class="section-img" alt="Recommendation">
  <h4 class="section-title">Smart Recommendation</h4>
  <input id="recommendName" class="form-control mb-2" placeholder="Student name">
  <button class="btn btn-info w-100" onclick="getRecommendation()">
    <i class="bi bi-lightbulb"></i> Get Recommendation
  </button>
  <p id="recommendResult" class="mt-3 fw-semibold"></p>
</div>

<!-- AI ASSISTANT -->
<div class="card p-4 mb-4 text-center">
  <img src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" class="section-img" alt="AI">
  <h4 class="section-title">Ask AI Assistant</h4>
  <input id="aiQuery" class="form-control mb-2" placeholder="Ask about courses, skills, learning‚Ä¶">
  <button class="btn btn-dark w-100" onclick="askAI()">
    <i class="bi bi-chat-dots"></i> Ask AI
  </button>
  <p id="aiResult" class="mt-3"></p>
</div>

<!-- CHART -->
<div class="card p-4">
  <h4 class="section-title text-center">üìä Student Progress Analytics</h4>
  <canvas id="progressChart"></canvas>
</div>

</div>

<footer>
  Made with ‚ù§Ô∏è by Keerthi | Hackathon Project
</footer>

<script>
const BASE_URL = "https://edu-agent-nzfp.onrender.com";

async function addCourse() {
  await fetch(`${BASE_URL}/add_course?name=${courseName.value}&duration=${courseDuration.value}`);
  loadCourses();
}

async function addStudent() {
  await fetch(`${BASE_URL}/add_student?name=${studentName.value}&progress=${studentProgress.value}`);
  loadStudents();
  loadChart();
}

async function loadCourses() {
  const res = await fetch(`${BASE_URL}/courses`);
  const data = await res.json();
  courseCount.innerText = data.length;
  coursesList.innerHTML = data.map(c =>
    `<li class="list-group-item"><i class="bi bi-book"></i> ${c.name} (${c.duration} days)</li>`
  ).join("");
}

async function loadStudents() {
  const res = await fetch(`${BASE_URL}/students`);
  const data = await res.json();
  studentCount.innerText = data.length;
  studentsList.innerHTML = data.map(s =>
    `<li class="list-group-item"><i class="bi bi-person"></i> ${s.name} ‚Äì ${s.progress}%</li>`
  ).join("");
}

async function getRecommendation() {
  const res = await fetch(`${BASE_URL}/recommend/${recommendName.value}`);
  const data = await res.json();
  recommendResult.innerText = data.recommendation || data.error;
}

async function askAI() {
  const res = await fetch(`${BASE_URL}/ai_recommend?query=${aiQuery.value}`);
  const data = await res.json();
  aiResult.innerText = data.answer;
}

async function loadChart() {
  const res = await fetch(`${BASE_URL}/students`);
  const data = await res.json();
  new Chart(document.getElementById("progressChart"), {
    type: "bar",
    data: {
      labels: data.map(s => s.name),
      datasets: [{
        label: "Progress %",
        data: data.map(s => s.progress),
        backgroundColor: "#4f46e5"
      }]
    },
    options: { scales: { y: { beginAtZero: true, max: 100 } } }
  });
}

loadCourses();
loadStudents();
loadChart();
</script>

</body>
</html>
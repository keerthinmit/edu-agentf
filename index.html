<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Educational Agent</title>

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<!-- Typed.js -->
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

<style>
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(-45deg,#f8f9fa,#e3f2fd,#f8f9fa);
  background-size:400% 400%;
  animation:gradientBG 12s ease infinite;
}
@keyframes gradientBG{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* HERO */
.hero{
  background:url('https://images.unsplash.com/photo-1529070538774-1843cb3265df?auto=format&fit=crop&w=1600&q=80') center/cover;
  color:white;
  padding:120px 20px;
  position:relative;
  text-align:center;
}
.hero::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,rgba(0,0,0,.7),rgba(0,51,153,.6));
}
.hero *{position:relative;z-index:1}

/* FLOATING ICON */
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
  100%{transform:translateY(0)}
}
.floating-icon{animation:float 3s ease-in-out infinite}

/* ICON HOVER */
.icon-hover{
  transition:.3s;
  cursor:pointer;
}
.icon-hover:hover{
  transform:rotate(-10deg) scale(1.2);
}

/* CARDS */
.card{
  border-radius:15px;
  transition:.3s;
}
.card:hover{
  transform:translateY(-5px);
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}

/* FOCUS */
input:focus,button:focus{
  outline:3px solid #0d6efd;
  outline-offset:2px;
}

.chat-box{
  background:#f1f3f8;
  border-radius:10px;
  padding:15px;
}
footer{font-size:14px}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-dark">
<div class="container-fluid">
<span class="navbar-brand fw-bold">
<i class="bi bi-mortarboard floating-icon"></i> Educational Agent
</span>
</div>
</nav>

<!-- HERO -->
<div class="hero">
<h1 class="fw-bold"><span id="typed"></span></h1>
<p>Smart learning management with AI-powered insights</p>
</div>

<!-- DASHBOARD -->
<div class="container my-4">
<div class="row text-center g-3">
<div class="col-md-4">
<div class="card p-3">
<i class="bi bi-book fs-1 text-primary floating-icon icon-hover"></i>
<h6>Total Courses</h6>
<h3 id="courseCount">0</h3>
</div>
</div>
<div class="col-md-4">
<div class="card p-3">
<i class="bi bi-people fs-1 text-success floating-icon icon-hover"></i>
<h6>Total Students</h6>
<h3 id="studentCount">0</h3>
</div>
</div>
<div class="col-md-4">
<div class="card p-3">
<i class="bi bi-graph-up fs-1 text-info floating-icon icon-hover"></i>
<h6>Average Progress</h6>
<h3 id="avgProgress">0%</h3>
</div>
</div>
</div>
</div>

<div class="container my-5">

<!-- VIEW BUTTONS -->
<div class="row text-center mb-4">
<div class="col-md-6">
<div class="card p-3 icon-hover" onclick="viewCourses()">
<i class="bi bi-journal-bookmark fs-1 text-primary"></i>
<h6 class="mt-2">View Courses</h6>
</div>
</div>
<div class="col-md-6">
<div class="card p-3 icon-hover" onclick="viewStudents()">
<i class="bi bi-people-fill fs-1 text-success"></i>
<h6 class="mt-2">View Students</h6>
</div>
</div>
</div>

<!-- ADD COURSE -->
<div class="card mb-4">
<div class="card-header fw-bold"><i class="bi bi-book"></i> Add Course</div>
<div class="card-body">
<input id="courseName" class="form-control mb-2" placeholder="Course Name">
<input id="courseDuration" type="number" class="form-control mb-2" placeholder="Duration (days)">
<button class="btn btn-primary" onclick="addCourse()">Add Course</button>
<ul id="coursesList" class="list-group mt-3"></ul>
</div>
</div>

<!-- ADD STUDENT -->
<div class="card mb-4">
<div class="card-header fw-bold"><i class="bi bi-person-plus"></i> Add Student</div>
<div class="card-body">
<input id="studentName" class="form-control mb-2" placeholder="Student Name">
<input id="studentProgress" type="number" min="0" max="100" class="form-control mb-2" placeholder="Progress %">
<button class="btn btn-success" onclick="addStudent()">Add Student</button>
<ul id="studentsList" class="list-group mt-3"></ul>
<button class="btn btn-warning mt-3" onclick="detectAtRiskStudents()">
<i class="bi bi-exclamation-triangle"></i> Detect At-Risk Students
</button>
</div>
</div>

<!-- AI CHAT -->
<div class="card">
<div class="card-header fw-bold"><i class="bi bi-robot"></i> AI Assistant</div>
<div class="card-body">
<input id="chatInput" class="form-control mb-2" placeholder="Ask about courses, students, progressâ€¦">
<button class="btn btn-dark" onclick="askAI()">Ask AI</button>
<div id="chatResponse" class="chat-box mt-3"></div>
</div>
</div>

<div id="result" role="alert" aria-live="polite" class="mt-4"></div>
</div>

<footer class="bg-dark text-white text-center p-3">
Made with â¤ï¸ by Keerthi | Hackathon Project
</footer>

<script>
new Typed("#typed",{
strings:["ğŸ“ Your Learning Companion","ğŸš€ Hackathon Ready","ğŸ’¡ Smart Recommendations"],
typeSpeed:60,
backSpeed:40,
loop:true
});

const BASE_URL="https://edu-agent-nzfp.onrender.com";
let courses=[];
let students=[];

function updateDashboard(){
courseCount.innerText=courses.length;
studentCount.innerText=students.length;
let avg=students.length?Math.round(students.reduce((a,b)=>a+b.progress,0)/students.length):0;
avgProgress.innerText=avg+"%";
}

async function addCourse(){
if(!courseName.value||!courseDuration.value) return alert("Fill all fields");
await fetch(`${BASE_URL}/add_course?name=${courseName.value}&duration=${courseDuration.value}`);
courses.push({name:courseName.value,duration:courseDuration.value});
updateDashboard(); viewCourses();
}

function viewCourses(){
coursesList.innerHTML=courses.map(c=>
`<li class="list-group-item">ğŸ“˜ ${c.name} â€“ ${c.duration} days</li>`
).join("");
}

async function addStudent(){
if(!studentName.value) return alert("Enter name");
await fetch(`${BASE_URL}/add_student?name=${studentName.value}&progress=${studentProgress.value}`);
students.push({name:studentName.value,progress:Number(studentProgress.value)});
updateDashboard(); viewStudents();
}

function viewStudents(){
studentsList.innerHTML=students.map(s=>
`<li class="list-group-item">ğŸ‘¤ ${s.name} â€“ ${s.progress}%</li>`
).join("");
}

function detectAtRiskStudents(){
let risky=students.filter(s=>s.progress<30);
result.innerHTML=risky.length
?`<div class="alert alert-warning">âš ï¸ At-risk: ${risky.map(s=>s.name).join(", ")}</div>`
:`<div class="alert alert-success">ğŸ‰ No students at risk</div>`;
}

function askAI(){
let q=chatInput.value.toLowerCase();
let reply="ğŸ¤– I can help with courses, students & progress.";
if(q.includes("course")) reply=`ğŸ“˜ Total courses: ${courses.length}`;
else if(q.includes("student")) reply=`ğŸ‘¥ Total students: ${students.length}`;
else if(q.includes("progress")) reply=`ğŸ“Š Average progress: ${avgProgress.innerText}`;
chatResponse.innerHTML=`<div class="alert alert-secondary">${reply}</div>`;
}
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Educational Agent</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<!-- Chart -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #eef2ff, #fdfbff);
  min-height: 100vh;
}

/* HERO */
.hero {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  color: white;
  padding: 80px 20px;
  text-align: center;
}
.hero i {
  font-size: 60px;
  animation: float 3s ease-in-out infinite;
}
@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
  100% { transform: translateY(0); }
}

/* GLASS CARD */
.glass {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

/* ICON */
.big-icon {
  font-size: 42px;
}

/* BUTTON */
.btn-rounded {
  border-radius: 30px;
}

/* FOOTER */
footer {
  background: #1e3c72;
  color: white;
  text-align: center;
  padding: 15px;
}
</style>
</head>

<body>

<!-- HERO -->
<section class="hero">
  <i class="bi bi-mortarboard-fill"></i>
  <h1 class="fw-bold mt-3">Educational Agent</h1>
  <p class="lead">AI-Powered Learning & Progress Tracker</p>
</section>

<div class="container my-5">

<!-- DASHBOARD -->
<div class="row text-center mb-4">
  <div class="col-md-4 mb-3">
    <div class="glass p-4">
      <i class="bi bi-book big-icon text-primary"></i>
      <h6 class="mt-2">Total Courses</h6>
      <h2 id="courseCount">0</h2>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="glass p-4">
      <i class="bi bi-people-fill big-icon text-success"></i>
      <h6 class="mt-2">Total Students</h6>
      <h2 id="studentCount">0</h2>
    </div>
  </div>
  <div class="col-md-4 mb-3">
    <div class="glass p-4">
      <i class="bi bi-graph-up-arrow big-icon text-info"></i>
      <h6 class="mt-2">Live Analytics</h6>
      <h2>üìä</h2>
    </div>
  </div>
</div>

<!-- ADD COURSE -->
<div class="glass p-4 mb-4">
  <h4><i class="bi bi-journal-plus text-primary"></i> Add Course</h4>
  <input id="courseName" class="form-control mb-2" placeholder="Course Name">
  <input id="courseDuration" type="number" class="form-control mb-2" placeholder="Duration (days)">
  <button class="btn btn-primary btn-rounded" onclick="addCourse()">Add Course</button>
  <ul id="coursesList" class="list-group mt-3"></ul>
</div>

<!-- ADD STUDENT -->
<div class="glass p-4 mb-4">
  <h4><i class="bi bi-person-plus-fill text-success"></i> Add Student</h4>
  <input id="studentName" class="form-control mb-2" placeholder="Student Name">
  <input id="studentProgress" type="number" class="form-control mb-2" placeholder="Progress %">
  <button class="btn btn-success btn-rounded" onclick="addStudent()">Add Student</button>
  <ul id="studentsList" class="list-group mt-3"></ul>
</div>

<!-- RECOMMENDATION -->
<div class="glass p-4 mb-4">
  <h4><i class="bi bi-lightbulb-fill text-warning"></i> Recommendation</h4>
  <input id="recommendName" class="form-control mb-2" placeholder="Student Name">
  <button class="btn btn-warning btn-rounded" onclick="getRecommendation()">Get Recommendation</button>
  <p id="recommendResult" class="mt-2 fw-semibold"></p>
</div>

<!-- AI ASSISTANT -->
<div class="glass p-4 mb-4">
  <h4><i class="bi bi-robot text-dark"></i> AI Assistant</h4>
  <input id="aiQuery" class="form-control mb-2" placeholder="Ask about courses...">
  <button class="btn btn-dark btn-rounded" onclick="askAI()">Ask AI</button>
  <p id="aiResult" class="mt-2"></p>
</div>

<!-- CHART -->
<div class="glass p-4">
  <h4><i class="bi bi-bar-chart-fill text-info"></i> Student Progress Chart</h4>
  <canvas id="progressChart"></canvas>
</div>

</div>

<footer>
  Made with ‚ù§Ô∏è by Keerthi | Hackathon Project
</footer>

<script>
const BASE_URL = "https://edu-agent-nzfp.onrender.com";
let chart;

async function addCourse() {
  await fetch(`${BASE_URL}/add_course?name=${courseName.value}&duration=${courseDuration.value}`);
  loadCourses();
}

async function addStudent() {
  await fetch(`${BASE_URL}/add_student?name=${studentName.value}&progress=${studentProgress.value}`);
  loadStudents();
  loadChart();
}

async function loadCourses() {
  const res = await fetch(`${BASE_URL}/courses`);
  const data = await res.json();
  courseCount.innerText = data.length;
  coursesList.innerHTML = data.map(c =>
    `<li class="list-group-item">${c.name} (${c.duration} days)</li>`
  ).join("");
}

async function loadStudents() {
  const res = await fetch(`${BASE_URL}/students`);
  const data = await res.json();
  studentCount.innerText = data.length;
  studentsList.innerHTML = data.map(s =>
    `<li class="list-group-item">${s.name} ‚Äì ${s.progress}%</li>`
  ).join("");
}

async function getRecommendation() {
  const res = await fetch(`${BASE_URL}/recommend/${recommendName.value}`);
  const data = await res.json();
  recommendResult.innerText = data.recommendation || data.error;
}

async function askAI() {
  const res = await fetch(`${BASE_URL}/ai_recommend?query=${aiQuery.value}`);
  const data = await res.json();
  aiResult.innerText = data.answer;
}

async function loadChart() {
  const res = await fetch(`${BASE_URL}/students`);
  const data = await res.json();
  const ctx = document.getElementById("progressChart");

  if (chart) chart.destroy();

  chart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: data.map(s => s.name),
      datasets: [{
        label: "Progress %",
        data: data.map(s => s.progress),
        backgroundColor: "#2a5298"
      }]
    },
    options: { scales: { y: { beginAtZero: true, max: 100 } } }
  });
}

loadCourses();
loadStudents();
loadChart();
</script>

</body>
</html>
